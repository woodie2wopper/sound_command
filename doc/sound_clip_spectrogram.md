# sound_clip_spectrogram

---

date: 2024-12-24

author: Hideki Osaka

aim: 音源から指定時刻の音のスペクトログラムと音を出力する。

## 概要

このプログラムは入力音源から指定時刻の音を指定の切り出しで切り出して、それのスペクトログラムと切り出した音を出力します。指定時刻の前のオフセット時刻を設定することもできます。これはデフォルトで3秒です。

また、指定の切り出し時刻が格納されたテキストファイルから指定時刻を読み込むこともできます。その場合、カラム番号かカラムのヘッダを指定することができます。

## 入力パラメータ：

- `--input-file`, `-i` : 入力ファイル
- `--time`, `-t` : 指定時刻（秒）
- `--duration`, `-d` : 切り出し時間（秒）
- `--offset`, `-o` : 切り出しのオフセット（デフォルト3秒）
- `--time-file`, `-f` : 切り出し時間が入ったテキストファイル
- `--input-parameter`, `-ip` : 入力パラメータファイル
- `--begin-time-index`, `-Bi` : 切り出し時刻の入った列数（1オリジン）
- `--begin-time-header`, `-Bh` : 切り出し時刻のヘッダ（文字列、デフォルトは"Begin Time (s)"）
- `--channel-index`, `-ci` : チャンネル番号の入った列数（1オリジン）
- `--channel-header`, `-ch` : チャンネルのヘッダ（文字列、デフォルトは"Channel"）
- `--output-file`, `-of` : 出力ファイル（デフォルトで入力ファイルのボディー+"_{指定時刻}"+"_spec"+".png"）
- `--fft-size`, `-fs` : FFTサイズ
- `--overlap`, `-ov` : overlap (default 50%)
- `--width`, `-w` : スペクトログラムの横幅：200px
- `--height`, `-h` : スペクトログラムの縦幅：100px
- `--colormap`, `-cm` : スペクトログラムの色調：Viridis
- `--low-freq`, `-lf` : スペクトログラムの最低周波数
- `--high-freq`, `-hf` : スペクトログラムの最高周波数
- `--max`, `-mx` : スペクトログラムの強度の最大値
- `--min`, `-mn` : スペクトログラムの強度の最小値
- `--output-file`, `-of` : 出力ファイル（デフォルトで入力ファイルのボディー+"_{指定時刻}"+"_spec"+".png"）

## エラー

- ファイルが存在しない場合
- ファイルが音声フォーマットでない場合
- ファイルサイズが大きい場合：WAVで4分以上の長さの時


以上